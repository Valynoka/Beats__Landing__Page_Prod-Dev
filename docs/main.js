"use strict";var openItem=function(e){var t=e.closest(".team__item"),n=t.find(".team__content"),e=n.find(".team__content-block").height();t.addClass("active"),n.height(e)},closeEveryItem=function(e){var t=e.find(".team__content");e.find(".team__item").removeClass("active"),t.height(0)};$(".team__title").click(function(e){var t=$(e.currentTarget),e=t.closest(".team");t.closest(".team__item").hasClass("active")?closeEveryItem(e):(closeEveryItem(e),openItem(t))});var myMap,fullscreenButton=document.querySelector(".hamburger"),fullscreenMenu=document.querySelector(".burger-menu");function toggleMenu(){fullscreenButton.classList.toggle("hamburger--active"),fullscreenMenu.classList.toggle("burger-menu--active"),$("body").toggleClass("lock")}fullscreenButton.addEventListener("click",function(e){e.preventDefault(),fullscreenButton.classList.toggle("hamburger--active"),fullscreenMenu.classList.toggle("burger-menu--active"),$("body").toggleClass("lock")}),fullscreenMenu.addEventListener("click",function(e){e.target.classList.contains("burger-menu-link")&&toggleMenu()});var init=function(){myMap=new ymaps.Map("ymap",{center:[55.751631,37.595478],zoom:14,controls:[]});var t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/marker.svg",iconImageSize:[46,57],iconImageOffset:[-35,-52]});[[55.758918,37.582689],[55.745295,37.581555],[55.750115,37.603775],[55.75242,37.614332]].forEach(function(e){t.add(new ymaps.Placemark(e))}),myMap.geoObjects.add(t),myMap.behaviors.disable("scrollZoom")};ymaps.ready(init);var validateFields=function(e,t){return t.forEach(function(e){e.removeClass("input-error"),""===e.val().trim()&&e.addClass("input-error")}),0===e.find(".input-error").length};$(".orders__sides").submit(function(e){e.preventDefault();var t=$(e.currentTarget),n=t.find("[name = 'name']"),o=t.find("[name = 'phone']"),i=t.find("[name = 'comment']"),e=t.find("[name = 'to']"),a=$("#modal"),r=a.find(".modal__content");a.removeClass("error-modal"),validateFields(t,[n,o,i,e])&&((e=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:n.val(),phone:o.val(),comment:i.val(),to:e.val()},error:function(e){}})).done(function(e){r.text(e.message)}),e.fail(function(e){e=e.responseJSON.message;r.text(e),a.addClass("error-modal")}),e.always(function(){$.fancybox.open({src:"#modal",type:"inline"})}))}),$(".app-btn-notification").click(function(e){e.preventDefault(),$.fancybox.close()});var sections=$("section"),display=$(".wrapper__container"),mobileDetect=new MobileDetect(window.navigator.userAgent),isMobile=mobileDetect.mobile();console.log("isMobile",isMobile);var inScroll=!1;sections.first().addClass("active");var performTransition=function(e){var t,n;!1===inScroll&&(inScroll=!0,t=-100*e,sections.eq(e),n=$(".fixed__navigation"),display.css({transform:"translateY(".concat(t,"%)")}),sections.eq(e).addClass("active").siblings().removeClass("active"),setTimeout(function(){inScroll=!1,n.find(".fixed__menu-item").eq(e).addClass("fixed__menu-item--active").siblings().removeClass("fixed__menu-item--active")},1300))};performTransition();var scrollViewport=function(e){var t=sections.filter(".active"),n=t.next(),t=t.prev();$("body").hasClass("lock")||$("body").hasClass("fancybox-active")||("next"===e&&n.length&&performTransition(n.index()),"prev"===e&&t.length&&performTransition(t.index()))};$(window).on("wheel",function(e){e=e.originalEvent.deltaY;0<e&&scrollViewport("next"),e<0&&scrollViewport("prev")}),$(window).on("keydown",function(e){var t=e.target.tagName.toLowerCase();if("input"!==t&&"textarea"!==t)switch(e.keyCode){case 38:scrollViewport("prev");break;case 40:scrollViewport("next")}}),$(".wrapper").on("touchmove",function(e){return e.preventDefault()}),$("[data-scroll-to]").click(function(e){e.preventDefault();e=$(e.currentTarget).attr("data-scroll-to"),e=$("[data-section-id=".concat(e,"]"));performTransition(e.index())}),isMobile&&$("body").swipe({swipe:function(e,t){"up"==t&&scrollViewport("next"),"down"==t&&scrollViewport("prev")}});var mesureWidth=function(e){var t=0,n=$(window).width(),o=e.closest(".products-menu").find(".products-menu__title"),i=o.width()*o.length,a=e.find(".products-menu__container"),r=parseInt(a.css("padding-left")),l=parseInt(a.css("padding-right")),e=window.matchMedia("(max-width: 768px)").matches,a=window.matchMedia("(max-width: 480px)").matches;return{container:t=e&&!a?n-i:a?n-o.width():524,textContainer:t-l-r}},closeEveryItemInContainer=function(e){var t=e.find(".products-menu__item"),e=e.find(".products-menu__content");t.removeClass("active"),e.width(0)},openlyItem=function(e){var t=e.find(".products-menu__content"),n=mesureWidth(e),o=e.find(".products-menu__container");e.addClass("active"),t.width(n.container),o.width(n.textContainer)};$(".products-menu__title").on("click",function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest(".products-menu__item"),e=n.hasClass("active"),t=t.closest(".products-menu");e?closeEveryItemInContainer(t):(closeEveryItemInContainer(t),openlyItem(n))});var slider=$(".assortment__list").bxSlider({pager:!1,controls:!1});$(".assortment__control--left").click(function(e){e.preventDefault(),slider.goToPrevSlide()}),$(".assortment__control--right").click(function(e){e.preventDefault(),slider.goToNextSlide()});var video,durationControl,soundControl,intervalId,soundLevel,findBlockByAlias=function(n){return $(".reviews__block-content").filter(function(e,t){return $(t).attr("data-linked-with")===n})};$(".reviews__link").click(function(e){e.preventDefault();var t=$(e.currentTarget),e=t.attr("data-open"),e=findBlockByAlias(e),t=t.closest(".reviews__items");e.addClass("active").siblings().removeClass("active"),t.addClass("active").siblings().removeClass("active")});var playBtn=document.querySelector(".video__player-img"),soundBtn=document.getElementById("mic"),playerPlayBtn=document.querySelector(".duration__img");function playStop(){playBtn.classList.toggle("video__player-img--active"),video.paused?(video.play(),playerPlayBtn.classList.add("active"),intervalId=setInterval(updateTime,1e3/60)):(video.pause(),playerPlayBtn.classList.remove("active"),clearInterval(intervalId))}function setVideoTime(){video.currentTime=durationControl.value,updateTime()}function updateTime(){durationControl.value=video.currentTime;var e=video.duration/99.5,e=video.currentTime/e;durationControl.style.background="linear-gradient(90deg, #E01F3D 0%, #E01F3D ".concat(e,"%, #E01F3D 0%, #333333 ").concat(e,"%)")}function soundOf(){0==video.volume?(video.volume=soundLevel,soundControl.value=100*soundLevel,soundBtn.classList.remove("active")):(soundLevel=video.volume,video.volume=0,soundControl.value=0,soundBtn.classList.add("active"))}function changeSoundVolume(){video.volume=soundControl.value/100,0==video.volume?soundBtn.classList.add("active"):soundBtn.classList.remove("active"),console.log("значение volume у видео"+video.volume),console.log("значение value у miclevel"+soundControl.value/10)}(video=document.getElementById("player")).addEventListener("loadeddata",function(){video.addEventListener("click",playStop);for(var e=document.querySelectorAll(".play"),t=0;t<e.length;t++)e[t].addEventListener("click",playStop);(durationControl=document.getElementById("durationLevel")).min=0,durationControl.value=0,durationControl.max=video.duration,durationControl.addEventListener("input",setVideoTime),soundBtn.addEventListener("click",soundOf),(soundControl=document.getElementById("micLevel")).min=0,soundControl.max=100,soundControl.value=soundControl.max,soundControl.addEventListener("input",changeSoundVolume)}),video.addEventListener("ended",function(){playBtn.classList.toggle("video__player-img--active"),video.currentTime=0,playerPlayBtn.classList.remove("active")});